@model JumbotronEventFinder.Models.Purchase
@{
    ViewData["Title"] = "Confirm Purchase";
}

<h2>Confirm Purchase</h2>
<hr />

<div class="row">
    <div class="col-md-6">
        <h4>Purchase Details</h4>
        <dl class="row">
            <dt class="col-sm-4">Show ID:</dt>
            <dd class="col-sm-8">@Model.ShowId</dd>

            <dt class="col-sm-4">Name:</dt>
            <dd class="col-sm-8">@Model.Name</dd>

            <dt class="col-sm-4">Email:</dt>
            <dd class="col-sm-8">@Model.Email</dd>

            <dt class="col-sm-4">Tickets:</dt>
            <dd class="col-sm-8">@Model.TicketSales</dd>

            <dt class="col-sm-4">Payment Type:</dt>
            <dd class="col-sm-8">@Model.PaymentType</dd>

            <dt class="col-sm-4">Card Number:</dt>
            <dd class="col-sm-8">
                @if (!string.IsNullOrEmpty(Model.CardNumber) && Model.CardNumber.Length >= 4)
                {
                    @($"**** **** **** {Model.CardNumber.Substring(Model.CardNumber.Length - 4)}")
                }
                else
                {
                    @("****")
                }
            </dd>

            <dt class="col-sm-4">Expiration:</dt>
            <dd class="col-sm-8">@Model.ExpirationDate</dd>
        </dl>

        <form asp-controller="Purchases" asp-action="Confirm" asp-route-id="@Model.PurchaseId" method="post">
            @Html.AntiForgeryToken()
            <div class="form-group">
                <button type="submit" class="btn btn-success">Confirm Purchase</button>
                <a asp-action="Index" asp-route-showId="@Model.ShowId" class="btn btn-secondary">Edit</a>
                <a asp-controller="Home" asp-action="Index" class="btn btn-outline-secondary">Cancel</a>
            </div>
        </form>
    </div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}